<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Paginado con cambio de tamaño</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container">
    <h2>Productos</h2>

    <div class="form-inline" style="margin-bottom: 10px;">
        <label for="pageSize">Tamaño de página: </label>
        <select id="pageSize" class="form-control">
            <option value="5">5</option>
            <option value="10" selected>10</option>
            <option value="25">25</option>
            <option value="50">50</option>
        </select>
    </div>

    <table class="table table-bordered" id="tabla-productos">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <nav>
        <ul class="pagination" id="paginador"></ul>
    </nav>
</div>

<script>
    var currentPage = 1;

    function cargarProductos(page) {
        var pageSize = $('#pageSize').val();

        $.getJSON('/Productos/GetPaged', { page: page, pageSize: pageSize }, function (data) {
            var rows = '';
            $.each(data.Data, function (i, item) {
                rows += '<tr><td>' + item.Id + '</td><td>' + item.Nombre + '</td></tr>';
            });
            $('#tabla-productos tbody').html(rows);

            var totalPages = Math.ceil(data.TotalItems / pageSize);
            var paginador = '';
            for (var i = 1; i <= totalPages; i++) {
                paginador += '<li class="' + (i == page ? 'active' : '') + '">' +
                             '<a href="#" onclick="cargarProductos(' + i + '); return false;">' + i + '</a></li>';
            }
            $('#paginador').html(paginador);

            currentPage = page;
        });
    }

    $(document).ready(function () {
        cargarProductos(currentPage);

        $('#pageSize').change(function () {
            cargarProductos(1); // Reinicia a página 1 al cambiar tamaño
        });
    });
</script>
</body>
</html>




{"Status":500,"Message":"ORA-12570: Sesión de Red: error de lectura de paquete inesperado\r\nhttps://docs.oracle.com/error-help/db/ora-12570/","Description":" en OracleInternal.ServiceObjects.OracleFailoverMgrImpl.OnError(OracleConnection connection, CallHistoryRecord chr, Object mi, Exception ex, Boolean bTopLevelCall, Boolean& bCanRecordNewCall)\r\n en Oracle.ManagedDataAccess.Client.OracleCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n en System.Data.Entity.Infrastructure.Interception.InternalDispatcher`1.Dispatch[TTarget,TInterceptionContext,TResult](TTarget target, Func`3 operation, TInterceptionContext interceptionContext, Action`3 executing, Action`3 executed)\r\n en System.Data.Entity.Infrastructure.Interception.DbCommandDispatcher.Reader(DbCommand command, DbCommandInterceptionContext interceptionContext)\r\n en System.Data.Entity.Core.EntityClient.Internal.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)","Data":null}
